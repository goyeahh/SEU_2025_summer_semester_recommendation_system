{% extends 'frontend/base.html' %}
{% load movie_extras %}
{% block body_class %}homepage{% endblock %}

{% block title %}
网站首页 - 电影推荐系统
{% endblock %}

{% block content %}
<div class="p-5 mb-4 bg-body-tertiary rounded-3">
    <div class="container-fluid py-5">
        <h1 class="display-5 fw-bold">你好，电影推荐系统！</h1>
    </div>
</div>

<h2>热门电影</h2>
<hr>

<style>
    .card-img-container {
        height: 430px; /* 设置一个固定的图片容器高度 */
        overflow: hidden;
    }
    .card-img-container .card-img-top {
        width: 100%;
        height: 100%;
        object-fit: cover; /* 确保图片填满容器而不变形 */
    }
    .card-body .card-text {
        margin-bottom: 0.25rem; /* 减小“年份”、“导演”、“评分”之间的垂直间距 */
    }
        /* 新增：星星评分样式 */
    .rating-stars {
        color: #f8d64e; /* 设置星星的颜色为金色 */
        font-size: 0.9rem;
    }
    .rating-text {
        color: #6c757d; /* 恢复数字评分的颜色 */
        font-size: 0.9rem;
        margin-left: 0.25rem;
    }
</style>

<div class="row">
    {% for movie in movies %}
    <div class="col-lg-3 col-md-4 mb-4">
        <div class="card h-100">
            <div class="card-img-container">
                <img src="{{ movie.poster.url|default:'https://via.placeholder.com/150x220.png?text=暂无海报' }}" class="card-img-top">
            </div>
            <div class="card-body">
                <h5 class="card-title">{{ movie.name }}</h5>
                <p class="card-text">年份: {{ movie.year }}</p>
                <p class="card-text">导演: {{ movie.director }}</p>
                <div class="card-text">
                    {{ movie.rating|rating_to_stars }}
                </div>
                <a href="{% url 'movie-detail' movie.id %}" class="btn btn-primary">查看详情</a>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}

